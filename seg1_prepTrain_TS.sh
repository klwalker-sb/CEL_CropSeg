#!/bin/bash -l

#SBATCH -N 1 # number of nodes
#SBATCH -n 2 # number of cores
#SBATCH -t 0-08:00 # time (D-HH:MM)
#SBATCH -p basic
#SBATCH -o cpyTS3.%N.%a.%j.out # STDOUT
#SBATCH -e cpyTS3.%N.%a.%j.err # STDERR
#SBATCH --job-name="cpyTS3"
#SBATCH --array=[000,001,002,003,005,006,007,008,009,010,011,012,013,014,015,016,027,028,029,030,031,032,033,034,035,036,037,038,039,040,041,042,045,046,047,048,049,050,051,052,053,054,055,056,057,058,059,060,065,066,067,068,069,070,071,072,073,074,075,076,078,079,084,085,086,087,088,089,090,097,098,099,100,101]%4

### only need to run grids with training digitizations: 
## 3 ## 060,080,095,115,185,204,208,237,250,266,270,280,395,411,439,458,503,504,505,506,537,550,551,553,598,599,600,601,603,605,633,647,648,649,650,651,654,655,656,657,677,680,681,682,683,684,685,686,688,691,695,696,697,698,699,700,701,703,704,713,714,716,717,718,719,721,723,724,729,730,731,732,733,734,735,737,738,739,740,751,752,755,756,757,758,759,760,762,763,765,766,767,768,769,771,773,774,775,776,777,779,786,788,790,791,792,793,794,795,798,799,800,801,802,804,806,807,808,809,810,811,812,814,818,819,823,824,825,826,828,829,830,831,833,834,835,836,837,838,839,840,841,842,843,844,845,846,847,848,853,854,855,856,857,860,861,862,864,865,866,867,870,871,872,873,874,875,876,877,878,880,883,884,890,892,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912,913,914,917,918,919,920,924,925,926,928,930,931,932,933,934,935,937,938,940,941,942,943,944,945,946,947,948,949,950,951,952,957,958,959,960,963,966,967,968,969,970,971,972,973,975,976,977,978,979,980,981,982,983,984,985,990,991,994,996,997,998,999
## 4 ## 000,001,002,003,005,006,007,008,009,010,011,012,013,014,015,016,027,028,029,030,031,032,033,034,035,036,037,038,039,040,041,042,045,046,047,048,049,050,051,052,053,054,055,056,057,058,059,060,065,066,067,068,069,070,071,072,073,074,075,076,078,079,084,085,086,087,088,089,090,097,098,099,100,101


GRID_ID="$(($SLURM_ARRAY_TASK_ID + 3000))" 


#########################
##### do not change below 

####Set permissions of output files:
umask 002

## set parameters in seg0_config.sh
source seg0_config.sh

cd ~/
conda activate .cultionet38
for VI in "${VI_array[@]}"
do
python ~/code/bash/seg_utils/seg1_prepTrain_TS.py $GRID_ID $VI $project_dir $VERSION_DIR $grid_file $END_YR
done


conda deactivate 
